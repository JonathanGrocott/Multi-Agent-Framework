Metadata-Version: 2.4
Name: multi-agent-framework
Version: 0.1.0
Summary: Multi-agent orchestration framework for manufacturing with MCP integration
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: pydantic>=2.0.0
Requires-Dist: pyyaml>=6.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"

# Multi-Agent Orchestration Framework

A Python framework for orchestrating specialized AI agents in manufacturing environments. Each agent is an expert on a specific industrial machine and performs specialized functions (data fetching, analysis, summary) using MCP (Model Context Protocol) tools.

## Overview

This framework enables you to build persona-specific multi-agent systems where:
- **Specialized Agents**: Each agent combines machine expertise + functional expertise (e.g., "Spar Lamination Data Fetcher")
- **Coordinator Pattern**: Central orchestrator routes tasks to appropriate agents based on user queries
- **Event-Driven**: Agents communicate through an event bus with minimal token usage
- **MCP Integration**: Agents use MCP tools to access manufacturing data from HighByte, SQL, Teradata, etc.

## Architecture

```
┌─────────────┐
│    User     │
└──────┬──────┘
       │
       ▼
┌─────────────────┐
│  Coordinator    │ ─────► Routing Config (keywords/LLM)
└────┬───┬───┬────┘
     │   │   │
     ▼   ▼   ▼
  ┌─────┐ ┌─────┐ ┌─────┐
  │Agent│ │Agent│ │Agent│
  │ 1   │ │ 2   │ │ 3   │
  └─────┘ └─────┘ └─────┘
     │       │       │
     └───┬───┴───┬───┘
         ▼       ▼
    ┌─────────────────┐
    │ Shared Context  │
    │   Event Bus     │
    │   MCP Client    │
    └─────────────────┘
```

## Quick Start

### Installation

```bash
# Clone the repository
git clone <repository-url>
cd Multi-Agent-Framework

# Install dependencies
pip install -r requirements.txt
```

### Configuration

Create a YAML configuration file for your use case (see `multi_agent_framework/examples/spar_lamination_config.yaml`):

```yaml
agents:
  - agent_id: "machine_a_data_fetcher"
    name: "Machine A Data Fetcher"
    machine_id: "machine_a"
    function: "data_fetching"
    capabilities:
      - "fetch_current_status"
      - "retrieve_sensor_data"
    mcp_tools:
      - server: "highbyte"
        tools:
          - "get_robot_status"
          - "get_process_data"

routing_examples:
  - keywords: ["machine a", "robot a"]
    machine_id: "machine_a"

mcp_servers:
  highbyte:
    type: "highbyte"
    endpoint: "http://your-server:8080"
```

### Usage

```python
from multi_agent_framework.core import SharedContext, EventBus, Coordinator
from multi_agent_framework.agents import AgentRegistry, SpecializedAgent
from multi_agent_framework.config import load_config

# Load configuration
config = load_config("path/to/config.yaml")

# Initialize system
context = SharedContext()
event_bus = EventBus()
registry = AgentRegistry()

# Create coordinator
coordinator = Coordinator(
    agent_registry=registry,
    context=context,
    event_bus=event_bus
)

# Execute query
result = coordinator.execute_workflow(
    "What's the status of Machine A?"
)

print(result['final_output'])
```

### Run Demo

```bash
cd multi_agent_framework/examples
python demo.py
```

## Key Components

### Specialized Agent

Combines machine expertise and functional expertise:

```python
agent = SpecializedAgent(
    agent_id="spar_lam_data_fetcher",
    name="Spar Lamination Data Fetcher",
    machine_id="spar_lamination_machine",
    function="data_fetching",
    capabilities=["fetch_status", "query_logs"],
    allowed_tools=["get_robot_status", "query_logs"],
    context=context,
    event_bus=event_bus,
    mcp_client=mcp_client
)
```

### Coordinator

Routes user queries to appropriate agents:

```python
coordinator = Coordinator(
    agent_registry=registry,
    context=context,
    event_bus=event_bus,
    routing_config={"examples": [...]}
)

result = coordinator.execute_workflow("What errors occurred in the last hour?")
```

### Shared Context

Token-efficient information passing:

```python
# Agent 1 writes
context.write("machine_a.status", status_data, summary="Machine is running normally")

# Agent 2 reads
status = context.read("machine_a.status")
```

## Project Structure

```
multi_agent_framework/
├── core/
│   ├── agent.py           # Base agent class
│   ├── coordinator.py     # Task routing and orchestration
│   ├── context.py         # Shared memory
│   ├── events.py          # Event system
│   └── mcp_client.py      # MCP tool integration
├── agents/
│   ├── specialized_agent.py  # Specialized agent implementation
│   └── registry.py           # Agent discovery and management
├── config/
│   ├── agent_config.py       # Pydantic schemas
│   └── config_loader.py      # YAML loader
└── examples/
    ├── spar_lamination_config.yaml
    └── demo.py
```

## Persona-Specific Deployments

This framework is designed to create **separate deployments** for different personas:

1. **Equipment Engineer for Spar Lamination Machine**
   - Agents: Data Fetcher, Analyzer, Summarizer (all for spar lamination)
   - Tools: Machine status, process data, error logs
   
2. **Quality Engineer for Spar Lamination Machine**
   - Agents: Quality Data Fetcher, Quality Analyzer, Report Generator
   - Tools: Quality metrics, defect tracking, compliance data

Each deployment is a separate instance with its own `config.yaml`.

## Routing Strategies

### Keyword-Based (Default)

```yaml
routing_examples:
  - keywords: ["status", "current state"]
    machine_id: "spar_lamination_machine"
```

### LLM-Based (Future)

The coordinator can use an LLM to intelligently route queries by calling an MCP tool with routing examples.

## Development Roadmap

### Phase 1 (Current)
- ✅ Core framework with sequential execution
- ✅ Specialized agents with machine + function expertise
- ✅ Event-driven communication
- ✅ Keyword-based routing
- ⏳ MCP client integration (mock implementation)

### Phase 2 (Future)
- ⬜ Async/await execution for parallel agents
- ⬜ Retry logic and error handling
- ⬜ LLM-based intelligent routing
- ⬜ Vector DB integration for semantic routing
- ⬜ Monitoring and performance metrics
- ⬜ Real MCP SDK integration

## License

[Add your license here]

## Contributing

[Add contribution guidelines here]
